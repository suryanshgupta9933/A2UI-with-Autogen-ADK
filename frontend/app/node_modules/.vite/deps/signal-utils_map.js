import {
  createStorage
} from "./chunk-IV7QRA2E.js";
import "./chunk-ZDAEO5LF.js";
import "./chunk-PZ5AY32C.js";

// ../packages/lit/node_modules/signal-utils/dist/map.ts.js
var SignalMap = class {
  collection = createStorage();
  storages = /* @__PURE__ */ new Map();
  vals;
  readStorageFor(key) {
    const {
      storages
    } = this;
    let storage = storages.get(key);
    if (storage === void 0) {
      storage = createStorage();
      storages.set(key, storage);
    }
    storage.get();
  }
  dirtyStorageFor(key) {
    const storage = this.storages.get(key);
    if (storage) {
      storage.set(null);
    }
  }
  constructor(existing) {
    this.vals = existing ? new Map(existing) : /* @__PURE__ */ new Map();
  }
  // **** KEY GETTERS ****
  get(key) {
    this.readStorageFor(key);
    return this.vals.get(key);
  }
  has(key) {
    this.readStorageFor(key);
    return this.vals.has(key);
  }
  // **** ALL GETTERS ****
  entries() {
    this.collection.get();
    return this.vals.entries();
  }
  keys() {
    this.collection.get();
    return this.vals.keys();
  }
  values() {
    this.collection.get();
    return this.vals.values();
  }
  forEach(fn) {
    this.collection.get();
    this.vals.forEach(fn);
  }
  get size() {
    this.collection.get();
    return this.vals.size;
  }
  [Symbol.iterator]() {
    this.collection.get();
    return this.vals[Symbol.iterator]();
  }
  get [Symbol.toStringTag]() {
    return this.vals[Symbol.toStringTag];
  }
  // **** KEY SETTERS ****
  set(key, value) {
    this.dirtyStorageFor(key);
    this.collection.set(null);
    this.vals.set(key, value);
    return this;
  }
  delete(key) {
    this.dirtyStorageFor(key);
    this.collection.set(null);
    return this.vals.delete(key);
  }
  // **** ALL SETTERS ****
  clear() {
    this.storages.forEach((s) => s.set(null));
    this.collection.set(null);
    this.vals.clear();
  }
};
Object.setPrototypeOf(SignalMap.prototype, Map.prototype);
export {
  SignalMap
};
//# sourceMappingURL=signal-utils_map.js.map
