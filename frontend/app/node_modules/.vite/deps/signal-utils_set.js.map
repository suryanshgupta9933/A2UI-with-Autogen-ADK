{
  "version": 3,
  "sources": ["../../../../packages/lit/node_modules/signal-utils/src/set.ts"],
  "sourcesContent": ["import {\n  createStorage,\n  type StorageMap,\n  type Storage,\n} from \"./-private/util.ts\";\n\nexport class SignalSet<T = unknown> implements Set<T> {\n  private collection = createStorage();\n\n  private storages: StorageMap<T> = new Map();\n\n  private vals: Set<T>;\n\n  private storageFor(key: T): Storage {\n    const storages = this.storages;\n    let storage = storages.get(key);\n\n    if (storage === undefined) {\n      storage = createStorage();\n      storages.set(key, storage);\n    }\n\n    return storage;\n  }\n\n  private dirtyStorageFor(key: T): void {\n    const storage = this.storages.get(key);\n\n    if (storage) {\n      storage.set(null);\n    }\n  }\n\n  constructor();\n  constructor(values: readonly T[] | null);\n  constructor(iterable: Iterable<T>);\n  constructor(existing?: readonly T[] | Iterable<T> | null | undefined) {\n    this.vals = new Set(existing);\n  }\n\n  // **** KEY GETTERS ****\n  has(value: T): boolean {\n    this.storageFor(value).get();\n\n    return this.vals.has(value);\n  }\n\n  // **** ALL GETTERS ****\n  entries(): IterableIterator<[T, T]> {\n    this.collection.get();\n\n    return this.vals.entries();\n  }\n\n  keys(): IterableIterator<T> {\n    this.collection.get();\n\n    return this.vals.keys();\n  }\n\n  values(): IterableIterator<T> {\n    this.collection.get();\n\n    return this.vals.values();\n  }\n\n  forEach(fn: (value1: T, value2: T, set: Set<T>) => void): void {\n    this.collection.get();\n\n    this.vals.forEach(fn);\n  }\n\n  get size(): number {\n    this.collection.get();\n\n    return this.vals.size;\n  }\n\n  [Symbol.iterator](): IterableIterator<T> {\n    this.collection.get();\n\n    return this.vals[Symbol.iterator]();\n  }\n\n  get [Symbol.toStringTag](): string {\n    return this.vals[Symbol.toStringTag];\n  }\n\n  // **** KEY SETTERS ****\n  add(value: T): this {\n    this.dirtyStorageFor(value);\n    this.collection.set(null);\n\n    this.vals.add(value);\n\n    return this;\n  }\n\n  delete(value: T): boolean {\n    this.dirtyStorageFor(value);\n    this.collection.set(null);\n\n    return this.vals.delete(value);\n  }\n\n  // **** ALL SETTERS ****\n  clear(): void {\n    this.storages.forEach((s) => s.set(null));\n    this.collection.set(null);\n\n    this.vals.clear();\n  }\n}\n\n// So instanceof works\nObject.setPrototypeOf(SignalSet.prototype, Set.prototype);\n"],
  "mappings": ";;;;;;;AAMO,IAAMA,YAAN,MAA+C;EAC5CC,aAAaC,cAAa;EAE1BC,WAA0B,oBAAIC,IAAG;EAEjCC;EAEAC,WAAWC,KAAiB;AAClC,UAAMJ,WAAW,KAAKA;AACtB,QAAIK,UAAUL,SAASM,IAAIF,GAAG;AAE9B,QAAIC,YAAYE,QAAW;AACzBF,gBAAUN,cAAa;AACvBC,eAASQ,IAAIJ,KAAKC,OAAO;IAC3B;AAEA,WAAOA;EACT;EAEQI,gBAAgBL,KAAc;AACpC,UAAMC,UAAU,KAAKL,SAASM,IAAIF,GAAG;AAErC,QAAIC,SAAS;AACXA,cAAQG,IAAI,IAAI;IAClB;EACF;EAKAE,YAAYC,UAA0D;AACpE,SAAKT,OAAO,IAAIU,IAAID,QAAQ;EAC9B;;EAGAE,IAAIC,OAAmB;AACrB,SAAKX,WAAWW,KAAK,EAAER,IAAG;AAE1B,WAAO,KAAKJ,KAAKW,IAAIC,KAAK;EAC5B;;EAGAC,UAAoC;AAClC,SAAKjB,WAAWQ,IAAG;AAEnB,WAAO,KAAKJ,KAAKa,QAAO;EAC1B;EAEAC,OAA4B;AAC1B,SAAKlB,WAAWQ,IAAG;AAEnB,WAAO,KAAKJ,KAAKc,KAAI;EACvB;EAEAC,SAA8B;AAC5B,SAAKnB,WAAWQ,IAAG;AAEnB,WAAO,KAAKJ,KAAKe,OAAM;EACzB;EAEAC,QAAQC,IAAuD;AAC7D,SAAKrB,WAAWQ,IAAG;AAEnB,SAAKJ,KAAKgB,QAAQC,EAAE;EACtB;EAEA,IAAIC,OAAe;AACjB,SAAKtB,WAAWQ,IAAG;AAEnB,WAAO,KAAKJ,KAAKkB;EACnB;EAEA,CAACC,OAAOC,QAAQ,IAAyB;AACvC,SAAKxB,WAAWQ,IAAG;AAEnB,WAAO,KAAKJ,KAAKmB,OAAOC,QAAQ,EAAC;EACnC;EAEA,KAAKD,OAAOE,WAAW,IAAY;AACjC,WAAO,KAAKrB,KAAKmB,OAAOE,WAAW;EACrC;;EAGAC,IAAIV,OAAgB;AAClB,SAAKL,gBAAgBK,KAAK;AAC1B,SAAKhB,WAAWU,IAAI,IAAI;AAExB,SAAKN,KAAKsB,IAAIV,KAAK;AAEnB,WAAO;EACT;EAEAW,OAAOX,OAAmB;AACxB,SAAKL,gBAAgBK,KAAK;AAC1B,SAAKhB,WAAWU,IAAI,IAAI;AAExB,WAAO,KAAKN,KAAKuB,OAAOX,KAAK;EAC/B;;EAGAY,QAAc;AACZ,SAAK1B,SAASkB,QAASS,OAAMA,EAAEnB,IAAI,IAAI,CAAC;AACxC,SAAKV,WAAWU,IAAI,IAAI;AAExB,SAAKN,KAAKwB,MAAK;EACjB;AACF;AAGAE,OAAOC,eAAehC,UAAUiC,WAAWlB,IAAIkB,SAAS;",
  "names": ["SignalSet", "collection", "createStorage", "storages", "Map", "vals", "storageFor", "key", "storage", "get", "undefined", "set", "dirtyStorageFor", "constructor", "existing", "Set", "has", "value", "entries", "keys", "values", "forEach", "fn", "size", "Symbol", "iterator", "toStringTag", "add", "delete", "clear", "s", "Object", "setPrototypeOf", "prototype"]
}
